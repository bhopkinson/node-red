[{"id":"98e70926.543948","type":"tab","label":"Home Assistant","disabled":false,"info":""},{"id":"8f5573e3.e52df","type":"subflow","name":"AutoRemote","info":"","category":"","in":[{"x":48,"y":62,"wires":[{"id":"7fc3381a.2cab08"}]}],"out":[{"x":509,"y":126,"wires":[{"id":"2176f8b5.63b808","port":0}]}]},{"id":"5806b60f.c2e778","type":"server","z":"","name":"Home Assistant","legacy":false,"hassio":false,"rejectUnauthorizedCerts":true,"ha_boolean":"y|yes|true|on|home|open"},{"id":"b7b614a.22dc4e8","type":"server-state-changed","z":"98e70926.543948","name":"Travis CI passed","server":"5806b60f.c2e778","entityidfilter":"sensor.bhopkinsonhomeassistantconfig_state","entityidfiltertype":"exact","outputinitially":false,"state_type":"str","haltifstate":"passed","halt_if_type":"str","halt_if_compare":"does_not_include","outputs":2,"x":141.5,"y":82,"wires":[["40dd2347.4b006c"],[]]},{"id":"40dd2347.4b006c","type":"http request","z":"98e70926.543948","name":"Pull Config","method":"GET","ret":"txt","url":"http://192.168.0.10:9002/hooks/pull-hass-config","tls":"","x":392.5,"y":81,"wires":[["d509ac6b.473d9"]]},{"id":"d509ac6b.473d9","type":"api-call-service","z":"98e70926.543948","name":"Restart","server":"5806b60f.c2e778","service_domain":"homeassistant","service":"restart","data":"","render_data":false,"mergecontext":"","output_location":"payload","output_location_type":"msg","x":611.5,"y":78,"wires":[[]]},{"id":"85c3663c.2deeb8","type":"switch","z":"8f5573e3.e52df","name":"device switch","property":"payload.devices","propertyType":"msg","rules":[{"t":"cont","v":"all","vt":"str"},{"t":"cont","v":"brad","vt":"str"},{"t":"cont","v":"heather","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":561.5,"y":64,"wires":[["7ee9425f.eebbbc","a77e02d4.b4c08"],["a77e02d4.b4c08"],["7ee9425f.eebbbc"]]},{"id":"36f8aac7.5a44f6","type":"http request","z":"8f5573e3.e52df","name":"","method":"GET","ret":"txt","url":"https://autoremotejoaomgcd.appspot.com/sendnotification?key={{payload.autoremote.key}}&title={{payload.title}}&text={{payload.text}}&sound={{payload.sound}}&vibration={{payload.vibration}}&url={{payload.url}}&id={{payload.notificationId}}&action={{payload.actionOnTap}}&icon={{payload.iconUrl}}&led={{payload.ledColor}}&ledon={{payload.ledOnMs}}&ledoff={{payload.ledOffMs}}&picture={{payload.pictureUrl}}&message={{payload.actionOnReceive}}&share={{payload.share}}&action1={{payload.action1}}&action1name={{payload.label1}}&action1icon={{payload.icon1Url}}&action2={{payload.action2}}&action2name={{payload.label2}}&action2icon={{payload.icon2Url}}&action3={{payload.action3}}&action3name={{payload.label3}}&action3icon={{payload.icon3Url}}&sender={{payload.actAsSender}}&persistent={{payload.Persistent}}&statusbaricon={{payload.statusBarIcon}}&ticker={{payload.tickerText}}&dismissontouch={{payload.dismissOnTouch}}&priority={{payload.priority}}&number={{payload.number}}&contentinfo={{payload.contentInfo}}&subtext={{payload.subText}}&maxprogress={{payload.maxProgress}}&progress={{payload.currentProgress}}&indeterminateprogress={{payload.indeterminateProgress}}&actionondismiss={{payload.actionOnDismiss}}&cancel={{payload.cancelId}}&sender={{payload.sender}}&password={{payload.autoremote.password}}&ttl={{payload.validityTime}}&collapseKey={{payload.group}}","tls":"","x":964.5,"y":52,"wires":[[]]},{"id":"93abf424.a7e898","type":"inject","z":"98e70926.543948","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":true,"onceDelay":0.1,"x":160.5,"y":251,"wires":[["85b090f8.a53eb"]]},{"id":"85b090f8.a53eb","type":"change","z":"98e70926.543948","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"title\":\"test\",\"text\":\"test\",\"devices\":[\"brad\",\"heather\",\"all\"]}","tot":"json"}],"action":"","property":"","from":"","to":"","reg":false,"x":424.5,"y":262,"wires":[["613cc96a.2501b8"]]},{"id":"ab669dc4.44ee8","type":"delay","z":"8f5573e3.e52df","name":"","pauseType":"timed","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":299,"y":245,"wires":[["a00146e.1235fb8"]]},{"id":"a00146e.1235fb8","type":"credentials","z":"8f5573e3.e52df","name":"Set AutoRemote Credentials for Brad","props":[{"value":"payload.autoremote.key","type":"msg"},{"value":"payload.autoremote.password","type":"msg"}],"x":552,"y":244,"wires":[["445fc02a.6940c"]]},{"id":"e0247ece.0def8","type":"credentials","z":"8f5573e3.e52df","name":"Set AutoRemote Credentials for Heather","props":[{"value":"payload.autoremote.key","type":"msg"},{"value":"payload.autoremote.password","type":"msg"}],"x":561,"y":289,"wires":[["86992644.128088"]]},{"id":"f29cbe54.442f4","type":"delay","z":"8f5573e3.e52df","name":"","pauseType":"timed","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":true,"x":299,"y":287,"wires":[["e0247ece.0def8"]]},{"id":"6b2e6565.b9f81c","type":"actionflows_in","z":"8f5573e3.e52df","name":"brad in","priority":"50","links":[],"scope":"private","x":79.5,"y":246,"wires":[["ab669dc4.44ee8"]]},{"id":"445fc02a.6940c","type":"actionflows_out","z":"8f5573e3.e52df","name":"brad out","links":[],"x":818.5,"y":245,"wires":[]},{"id":"d78bf183.0a291","type":"actionflows_in","z":"8f5573e3.e52df","name":"heather in","priority":"50","links":[],"scope":"private","x":89.5,"y":289,"wires":[["f29cbe54.442f4"]]},{"id":"86992644.128088","type":"actionflows_out","z":"8f5573e3.e52df","name":"heather out","links":[],"x":811.5,"y":291,"wires":[]},{"id":"7ee9425f.eebbbc","type":"actionflows","z":"8f5573e3.e52df","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"heather","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":767.5,"y":89,"wires":[["36f8aac7.5a44f6"]]},{"id":"a77e02d4.b4c08","type":"actionflows","z":"8f5573e3.e52df","info":"Describe your action API here.","untilproptype":"num","proptype":"msg","name":"brad","prop":"loop","untilprop":0,"until":"gt","loop":"none","scope":"private","perf":false,"seq":false,"x":767.5,"y":35,"wires":[["36f8aac7.5a44f6"]]},{"id":"7fc3381a.2cab08","type":"uuid","z":"8f5573e3.e52df","uuidVersion":"v4","namespaceType":"","namespace":"","namespaceCustom":"","name":"Set topic uuid","field":"payload.topic","fieldType":"msg","x":186.5,"y":62,"wires":[["85c3663c.2deeb8","2176f8b5.63b808"]]},{"id":"613cc96a.2501b8","type":"subflow:8f5573e3.e52df","z":"98e70926.543948","name":"","x":623.5,"y":260,"wires":[["d8adbd1e.cdcf8"]]},{"id":"d8adbd1e.cdcf8","type":"debug","z":"98e70926.543948","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":801.5,"y":266,"wires":[]},{"id":"2176f8b5.63b808","type":"change","z":"8f5573e3.e52df","name":"Set output","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.topic","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":398.5,"y":127,"wires":[[]]}]